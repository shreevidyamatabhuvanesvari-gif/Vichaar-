<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShriVidya Reel Creator</title>

<style>
body{
  margin:0;
  font-family:'Noto Sans Devanagari',sans-serif;
  background:#000;
  color:white;
  text-align:center;
}

/* START SCREEN */
#startScreen{
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

#startScreen h1{
  font-size:32px;
  margin-bottom:20px;
  color:#ffd700;
}

/* BUTTONS */
button{
  padding:12px 20px;
  border:none;
  border-radius:10px;
  background:linear-gradient(90deg,#ff8c00,#ff0066);
  color:white;
  font-size:16px;
  margin:8px;
}

/* CREATOR */
#creator{
  display:none;
  padding:15px;
}

input, textarea{
  width:90%;
  padding:10px;
  margin:8px;
  border-radius:8px;
  border:none;
  font-size:16px;
}

#previewImg{
  width:90%;
  max-height:220px;
  object-fit:contain;
  background:#111;
}

/* PLAYER */
#player{
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100vh;
  background:black;
  overflow:hidden;
}

#bgImg{
  position:absolute;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:opacity 1s;
}

#overlay{
  position:absolute;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.35);
}

/* TEXT */
#mainText{
  position:absolute;
  top:8%;
  width:100%;
  font-size:28px;
  font-weight:bold;
  line-height:1.4;
  padding:0 20px;
  text-shadow:0 0 10px #fff,0 0 20px #ff00ff;
}

/* WATERMARK */
#watermark{
  position:absolute;
  bottom:10px;
  right:15px;
  font-size:18px;
  font-weight:bold;
  animation:colorChange 4s infinite alternate;
}

@keyframes colorChange{
  0%{color:#ff0066}
  25%{color:#ffd700}
  50%{color:#00ffff}
  75%{color:#ff00ff}
  100%{color:#ffffff}
}

#slideCounter{
  margin-top:10px;
  color:#ffd700;
}
</style>
</head>
<body>

<!-- START -->
<div id="startScreen">
  <h1>üé¨ ShriVidya Reel Creator</h1>
  <button onclick="startCreator()">Create New Reel</button>
</div>

<!-- CREATOR -->
<div id="creator">
  <div id="slideCounter">Slide 1 / 10</div>

  <input type="file" accept="image/*" onchange="loadImage(event)">
  <img id="previewImg">

  <textarea id="textInput" rows="6"
    placeholder="‡§Ø‡§π‡§æ‡§Å 4‚Äì5 ‡§≤‡§æ‡§á‡§® ‡§ï‡§æ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea>

  <br>
  <button onclick="prevSlide()">‚¨Ö Back</button>
  <button onclick="nextSlide()">Next ‚û°</button>

  <div id="finishBox" style="display:none;">
    <button onclick="playReel()">‚ñ∂ Play Reel</button>
    <button onclick="editSlides()">‚úè Edit Slides</button>
  </div>
</div>

<!-- PLAYER -->
<div id="player">
  <img id="bgImg">
  <div id="overlay"></div>
  <div id="mainText"></div>
  <div id="watermark">ShriVidya</div>
</div>

<script>
let slides=[];
let currentSlide=0;
let playIndex=0;

function startCreator(){
  startScreen.style.display="none";
  creator.style.display="block";
  loadSlide();
}

function loadImage(e){
  const file=e.target.files[0];
  const reader=new FileReader();
  reader.onload=()=>{
    previewImg.src=reader.result;
    slides[currentSlide]=slides[currentSlide]||{};
    slides[currentSlide].image=reader.result;
  }
  reader.readAsDataURL(file);
}

function loadSlide(){
  slideCounter.innerText="Slide "+(currentSlide+1)+" / 10";
  const data=slides[currentSlide]||{};
  previewImg.src=data.image||"";
  textInput.value=data.text||"";
}

function saveSlide(){
  slides[currentSlide]=slides[currentSlide]||{};
  slides[currentSlide].text=textInput.value;
}

function nextSlide(){
  saveSlide();
  if(currentSlide<9){
    currentSlide++;
    loadSlide();
  } else {
    finishBox.style.display="block";
  }
}

function prevSlide(){
  saveSlide();
  if(currentSlide>0){
    currentSlide--;
    loadSlide();
  }
}

function editSlides(){
  finishBox.style.display="none";
  currentSlide=0;
  loadSlide();
}

function playReel(){
  creator.style.display="none";
  player.style.display="block";
  playIndex=0;
  playSlide();
}

function playSlide(){
  if(playIndex>=slides.length){
    alert("Reel Finished");
    player.style.display="none";
    creator.style.display="block";
    return;
  }

  const s=slides[playIndex];
  bgImg.src=s.image;
  bgImg.style.opacity=1;
  mainText.innerText=s.text;

  let speech=new SpeechSynthesisUtterance(s.text);
  speech.lang="hi-IN";
  speech.rate=0.85;
  speech.pitch=1.4;

  speech.onend=function(){
    setTimeout(()=>{
      bgImg.style.opacity=0;
      playIndex++;
      setTimeout(playSlide,900);
    },1000);
  };

  speechSynthesis.speak(speech);
}
</script>

</body>
</html>
