<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShriVidya Reel Creator</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(135deg,#1a0026,#330066);
  color:white;
  text-align:center;
}

/* POSTER AREA */
#poster{
  width:100%;
  height:70vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:12px;
}

/* PHOTO FRAME */
#photoFrame{
  width:90%;
  height:40%;
  border-radius:22px;
  overflow:hidden;
  background:#000;
  box-shadow:0 0 20px rgba(0,0,0,0.7);
}

#photoFrame img{
  width:100%;
  height:100%;
  object-fit:contain;
  animation: zoomMove 6s linear forwards;
  transition: opacity 1s;
}

@keyframes zoomMove{
  0%{transform:scale(1)}
  100%{transform:scale(1.08)}
}

/* QUOTE STYLE */
#quotePreview{
  width:90%;
  margin-top:12px;
  padding:14px;
  border-radius:14px;
  background:rgba(0,0,0,0.5);
  font-size:20px;
  line-height:1.4;
  font-weight:bold;
  min-height:60px;
}

/* SLIDE COUNTER */
#counter{
  font-size:18px;
  color:#ffd700;
  margin:6px;
}

/* CONTROLS */
#controls{
  background:#000;
  padding:10px;
}

input, textarea{
  width:92%;
  padding:8px;
  margin:6px;
  border-radius:10px;
  border:none;
}

button{
  padding:10px 18px;
  margin:6px;
  border:none;
  border-radius:10px;
  background:linear-gradient(90deg,#ff8c00,#ff0066);
  color:white;
}
</style>
</head>
<body>

<div id="poster">

  <div id="counter">Slide 1 / 10</div>

  <div id="photoFrame">
    <img id="previewImg">
  </div>

  <div id="quotePreview">
    “यहाँ आपका सुविचार स्टाइल में दिखाई देगा”
  </div>

</div>

<div id="controls">
  <input type="file" accept="image/*" id="imgInput">
  <textarea id="quoteInput" placeholder="4–5 लाइन का सुविचार लिखें"></textarea>

  <br>
  <button onclick="prevSlide()">⬅ Back</button>
  <button onclick="nextSlide()">Next ➡</button>
  <button onclick="startReel()">▶ Play Reel</button>
</div>

<script>
let slides = [];
let current = 0;
let playIndex = 0;

/* IMAGE LOAD */
document.getElementById("imgInput").addEventListener("change", function(e){
  const file = e.target.files[0];
  if(!file) return;

  const reader = new FileReader();
  reader.onload = function(){
    document.getElementById("previewImg").src = reader.result;
    slides[current] = slides[current] || {};
    slides[current].img = reader.result;
  };
  reader.readAsDataURL(file);
});

/* LIVE PREVIEW */
document.getElementById("quoteInput").addEventListener("input", function(){
  typeText(this.value);
});

/* TYPE ANIMATION */
function typeText(text){
  const el = document.getElementById("quotePreview");
  el.innerText = "";
  let i = 0;

  function typing(){
    if(i < text.length){
      el.innerText += text.charAt(i);
      i++;
      setTimeout(typing, 25);
    }
  }
  typing();
}

/* SAVE */
function saveSlide(){
  slides[current] = slides[current] || {};
  slides[current].text = document.getElementById("quoteInput").value;
}

/* LOAD */
function loadSlide(){
  document.getElementById("counter").innerText =
    "Slide " + (current+1) + " / 10";

  const data = slides[current] || {};

  document.getElementById("previewImg").src = data.img || "";
  document.getElementById("quoteInput").value = data.text || "";
  typeText(data.text || "");
}

/* NEXT */
function nextSlide(){
  saveSlide();
  if(current < 9){
    current++;
    loadSlide();
  } else {
    alert("✔ 10 Slides तैयार!");
  }
}

/* BACK */
function prevSlide(){
  saveSlide();
  if(current > 0){
    current--;
    loadSlide();
  }
}

/* START REEL */
function startReel(){
  saveSlide();
  document.getElementById("controls").style.display="none";
  playIndex = 0;
  playSlide();
}

/* PLAY SLIDE */
function playSlide(){
  if(playIndex >= slides.length){
    alert("Reel Finished");
    document.getElementById("controls").style.display="block";
    return;
  }

  const s = slides[playIndex];
  const img = document.getElementById("previewImg");

  img.style.opacity = 0;

  setTimeout(()=>{
    img.src = s.img || "";
    img.style.opacity = 1;

    typeText(s.text || "");
    speakSlide(s.text || "");

  },600);
}

/* VOICE */
function speakSlide(text){

  const speech = new SpeechSynthesisUtterance(text);
  let voices = speechSynthesis.getVoices();

  let bestVoice =
    voices.find(v => v.name.toLowerCase().includes("female")) ||
    voices.find(v => v.lang === "hi-IN") ||
    voices[0];

  if(bestVoice) speech.voice = bestVoice;

  speech.rate = 0.85;
  speech.pitch = 1.3;

  speech.onend = function(){
    setTimeout(()=>{
      playIndex++;
      playSlide();
    },1000);
  };

  speechSynthesis.cancel();
  speechSynthesis.speak(speech);
}
</script>

</body>
</html>
